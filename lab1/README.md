#  Проектирование адресного пространства

###  Цели

  1. Собрать схему CLOS
  2. Распределить адресное пространство
  3. Адресное пространство должно быть задокументировано
  
#### Часть 1. Топология
![](Схема1.png)


#### Часть 2. Распределение адресного пространства

 Адресное пространство распределено следующим образом: 

p2p - /31

Looopback - /32

IP = 10.Dn.Sn.Ln/31, где

Dn - диапазон в зависимости от номера ЦОДа

Dn для DC1 = 0...7

Dn для DC2 = 8...15

Sn - номер spine

Ln - номер leaf

Устройства leaf получают только четные номера начиная с нуля

##### Рассмотрю адресацию для DC1.

Суммарная маска для DC1 10.0.0.0/13

Суммарная маска для DC2 10.8.0.0/13 и так далее


Dn для DC1 = 0 - 7, где

0 - Loopback0

1 - Loopback1

Суммарная маска для Loopback0 и Loopback1 10.0.0.0/15

2 - p2p links

3 - reserved

Суммарная маска для p2p и резерв 10.2.0.0/15

4 ... 7 - services

Суммарная маска для service 10.4.0.0/14

##### Примеры адресов для DC1:

10.0.1.0/32  spine1 Loopback0

10.0.0.0/32 leaf0 Loopback0

10.2.1.0/31 p2p spine1 leaf0 причем 

    10.2.1.0/31 интерфейс leaf0

    10.2.1.1/31 интерфейс spine1
##### Подытожим 

|Назначение| Сеть|
|:-----------|--------------:|
|DC1 |10.0.0.0/13|
|Looopback DC1 |10.0.0.0/15|
|p2p и резерв DC1 |10.2.0.0/15|
|service DC1| 10.4.0.0/14|
|DC2 |10.8.0.0/13|
|Looopback DC1 |10.8.0.0/15|
|p2p и резерв DC1 |10.10.0.0/15|
|service DC1| 10.12.0.0/14|

#### Часть 3. Заполненипе таблицы адресации


|Локация| Устройство     | Интерфейс    | IP-адрес             | Маска подсети|
|:-----------------|:---------------|-------------------------:|:--------------------|-------:|
| DC1  | spine1 | Loopback0   | 10.0.1.0 |255.255.255.255|  
| DC1  | spine1 | Loopback1   | 10.1.1.0 |255.255.255.255|
| DC1  | spine1 | e1   | 10.2.1.1 |255.255.255.254| 
| DC1  | spine1 | e2   | 10.2.1.3 |255.255.255.254| 
| DC1  | spine1 | e3   | 10.2.1.5 |255.255.255.254| 
| DC1  | spine2 | Loopback0   | 10.0.2.0 |255.255.255.255|   
| DC1  | spine2 | Loopback1   | 10.1.2.0 |255.255.255.255|
| DC1  | spine2 | e1   | 10.2.2.1 |255.255.255.254| 
| DC1  | spine2 | e2   | 10.2.2.3 |255.255.255.254| 
| DC1  | spine2 | e3   | 10.2.2.5 |255.255.255.254| 
| DC1  | leaf0 | Loopback0   | 10.0.0.0 |255.255.255.255|   
| DC1  | leaf0 | Loopback1   | 10.1.0.0 |255.255.255.255|
| DC1  | leaf0 | e1   | 10.2.1.0 |255.255.255.254| 
| DC1  | leaf0 | e2   | 10.2.2.0 |255.255.255.254| 
| DC1  | leaf2 | Loopback0   | 10.0.0.2 |255.255.255.255|   
| DC1  | leaf2 | Loopback1   | 10.1.0.2 |255.255.255.255|
| DC1  | leaf2 | e1   | 10.2.1.2 |255.255.255.254| 
| DC1  | leaf2 | e2   | 10.2.2.2 |255.255.255.254|
| DC1  | leaf4 | Loopback0   | 10.0.0.4 |255.255.255.255|   
| DC1  | leaf4 | Loopback1   | 10.1.0.4 |255.255.255.255|
| DC1  | leaf4 | e1   | 10.2.1.4 |255.255.255.254| 
| DC1  | leaf4 | e2   | 10.2.2.4 |255.255.255.254|

IP адреса настроены на соответствующих интерфейсах. 

Файлы конфигурации можно посмотреть [здесь](configs/)
```